Change 2983 on 2003/11/02 by nick@llama

	HList's ->header('size',0) command is unreliable as measure of height
	of header window. Add new sub-command ->header('height') which
	uses computed geometry based height of _all_ column headers.
	Use that to compute nearest info.
	Fixes snag reported by Petr Pajas <pajas@ufal.ms.mff.cuni.cz>

Change 2982 on 2003/11/02 by nick@llama

	Create common dialogs as child of toplevel not MainWindow
	which avoids spurious raise of MainWindow.
	Try using ->Popup in FBox's ->Show rather than centred.

Change 2981 on 2003/11/02 by nick@llama

	Add -lm if perl's Configure has found it.

Change 2980 on 2003/11/02 by nick@llama

	Steve's browseentry.t patch

Change 2979 on 2003/11/02 by nick@llama

	Enable transparency

Change 2978 on 2003/11/02 by nick@llama

	If site gets <Configure> event (size change etc.) need
	to update site info.  Thanks to Scott Smedley <scottie7@tpg.com.au>

Change 2977 on 2003/11/02 by nick@llama

	Tweaks for Ballon and DialogBox from "Michael Krause" <VKrauseM@web.de>

Change 2976 on 2003/11/02 by nick@llama

	Jack's Ballon pod too

Change 2975 on 2003/11/02 by nick@llama

	Improved Balloon.pm from "Jack" <goodcall1@hotmail.com>

Change 2974 on 2003/11/01 by nick@camel

	MANIFEST stuff

Change 2973 on 2003/11/01 by nick@camel

	Tweak icon stuff (still not working on XP?)
	Now entry selection range bug is fixed test needs to reflect 
	that.

Change 2972 on 2003/11/01 by nick@llama

	Naive copy/paste of old iconimage code

Change 2971 on 2003/11/01 by nick@llama

	Slaven's patch for Gedi.pl

Change 2970 on 2003/11/01 by nick@llama

	Fix -foreground on widgets which use Tk::Derived but
	inherit from a widget which has the option (e.g. ROText from Text)

Change 2969 on 2003/11/01 by nick@llama

	Tab focus fix - something is returning '' rather than undef now.

Change 2966 on 2003/10/28 by nick@llama

	Update change log

Change 2965 on 2003/10/28 by nick@llama

	Fix for spaces in HList entry name

Change 2964 on 2003/10/28 by nick@llama

	More Slaven/Steve patches

Change 2963 on 2003/10/28 by nick@llama

	Something almost quite unlike  Dan Rawson's <Daniel.Rawson@asml.com>
	patch for BrowseEntry button packing which should have same effect.

Change 2962 on 2003/10/28 by nick@llama

	Slaven's dialog box <Return> binding (Tk800 -like)

Change 2961 on 2003/10/28 by nick@llama

	Slaven's hlist with spaces test.

Change 2960 on 2003/10/28 by nick@llama

	Slaven's tied SV test and fix

Change 2959 on 2003/10/26 by nick@llama

	Steve's PNG Makefile.PL patch (RANLIB with spaces).

Change 2958 on 2003/10/26 by nick@llama

	Try some tuning from CPANPLUS fail reports

Change 2957 on 2003/10/26 by nick@llama

	When we are using real Xrm calls we need extra
	check these days that mainwindow still exists.

Change 2956 on 2003/10/26 by nick@llama

	LangDoCallback() as used by Entry's -validatecmd etc. was
	not assuming UTF-8 (Thanks to Petr Pajas <pajas@ufal.ms.mff.cuni.cz>
	once again for finding this.)

Change 2954 on 2003/10/26 by nick@llama

	More panic avoidance

Change 2953 on 2003/10/26 by nick@llama

	Avoid using unqualified 'panic'

Change 2952 on 2003/10/26 by nick@llama

	Add some sort-s so that 5.8.1's randomized hashes
	don't keep changing generated .t/.m files.

Change 2951 on 2003/10/20 by nick@llama

	Update changes
	Dist name Tk-804... rather than Tk804...

Change 2950 on 2003/10/20 by nick@llama

	Avoid poking our noses in the internals of objects.
	Catch simple case of recursive lists.

Change 2949 on 2003/10/20 by nick@llama

	Allow empty -background on bitmaps.

Change 2948 on 2003/10/20 by nick@llama

	Part fix for problem found by Petr Pajas <pajas@ufal.ms.mff.cuni.cz>.
	Avoid stringify of config options to test for emptiness:
	Use LangNull for ObjctIsEmpty in _new_ config code.
	Enhance LangNull to return true for string "".
	Fix _old_ config code to avoid NULL for non-optional
	options for which LangNull() now returns true.

Change 2946 on 2003/10/20 by nick@llama

	Selection was off-by-1 as pointed out by  Simon.Lux@etas.de

Change 2944 on 2003/10/10 by nick@llama

	Update change log

Change 2943 on 2003/10/10 by nick@llama

	Suggestions from Tom.Horsley@ccur.com

Change 2942 on 2003/10/10 by nick@llama

	Were leaking SVs for option DB values.

Change 2941 on 2003/10/10 by nick@llama

	More size tests (XFT=0 ssh-ed to SuSE8.2)

Change 2940 on 2003/10/10 by nick@llama

	Fix nasty pseudo-list SV leak (e.g. fonts with 'helvetica 12 bold'
	got temp AV to get at elements and we lost them.)

Change 2939 on 2003/10/10 by nick@dromedary

	More todo skips (XFT on stock SuSE8.2)

Change 2938 on 2003/10/09 by nick@bactrian

	UnixFont todo of listbox.t

Change 2937 on 2003/10/09 by nick@dromedary

	Check leaks

Change 2936 on 2003/10/09 by nick@camel

	Loose some debug - Win32 calls ->focus after window
	has been destroyed.

Change 2935 on 2003/10/09 by nick@camel

	Avoid JPEG<=>GIF compare

Change 2934 on 2003/10/09 by nick@camel

	Test todo-ing and correction for Win32

Change 2933 on 2003/10/09 by nick@llama

	perl5.6 tolerance (maybe)

Change 2932 on 2003/10/09 by nick@llama

	Another try an PNG/zlib build

Change 2928 on 2003/10/06 by nick@llama

	Decls.[tm] seem to have changed again...

Change 2927 on 2003/10/06 by nick@llama

	Avoid UNIVERSAL.pm

Change 2926 on 2003/10/04 by nick@llama

	Sub-dir MANIFEST issues reported by.
	Vinicius Jose Latorre <vinicius@cpqd.com.br>

Change 2925 on 2003/10/04 by nick@llama

	Steve Hay's <steve.hay@uk.radan.com> diagnosis of Win32 PNG/zlib
	issues.

Change 2924 on 2003/09/28 by nick@llama

	pre-release prep

Change 2923 on 2003/09/28 by nick@camel

	Skip ColorEditor test on Win32 - it seems to leave a 
	color map open at Win32 level and this causes abort()
	on exit.

Change 2922 on 2003/09/28 by nick@camel

	Win32/dmake/vc6 build issues.

Change 2921 on 2003/09/28 by nick@camel

	Tweaks to tkWinFont to match "new" perl/Tk API rules:
	  - subfonts returns list of lists
	  - font actual attribute size is in pixels

Change 2920 on 2003/09/28 by nick@llama

	Remove the -state => 'hidden' way of eliding text in Text widget.
	Mainstream Tcl/Tk now has -elide as the way to do it, by aligning
	with Tcl/Tk it works again. Update docs to match.

Change 2919 on 2003/09/27 by nick@llama

	Finish moving Photo to core
	Some other MANIFEST cleanup.

Change 2918 on 2003/09/27 by nick@llama

	Photo to core (part 1)

Change 2917 on 2003/09/27 by nick@llama

	Generate prolog

Change 2916 on 2003/09/27 by nick@llama

	Cure some nasty leaks:
	 1. Original quest was for 'after' leak - which was due
	    to excessive REFCNT on the callback.
	 2. When that was fixed the new test showed that return
	    values were leaking (how have we missed that!)

Change 2915 on 2003/09/26 by nick@llama

	Don't exclude Tcl_NewLongObj
	Changelog update
	Other auto-generated updates.

Change 2914 on 2003/09/26 by nick@llama

	Steves trace and tiler patches.

Change 2912 on 2003/09/25 by nick@llama

	Don't use 32-bit chars unless we are using XFT.
	Win32 is short anyway, and tkUnixFont's bitmaps get huge.

Change 2911 on 2003/09/25 by nick@llama

	Cleanup MANIFEST

Change 2910 on 2003/09/25 by nick@llama

	Steve's IRIX patch

Change 2909 on 2003/09/18 by nick@llama

	Update Change.log

Change 2908 on 2003/09/18 by nick@llama

	Lost UTF-8ness on cget
	Explicit dTHX in objGlue.c

Change 2907 on 2003/09/17 by nick@llama

	Use TixGrid to browse unicode

Change 2906 on 2003/09/17 by nick@llama

	Steve's new Trace module

Change 2905 on 2003/09/15 by nick@llama

	Honour -justify in Tix Text items

Change 2903 on 2003/09/15 by nick@llama

	Another round of TixGrid doc/code cleanup.

Change 2902 on 2003/09/15 by nick@llama

	Rub some corners off TixGrid:
	 -browsecmd and -command exist
	 ->see implemented
	 de-deprecate ;-)

Change 2901 on 2003/09/13 by nick@llama

	Basic support for ->chooseDirectory based on tweaked FBox.

Change 2899 on 2003/09/12 by nick@llama

	On XFree86 use Xutf8LookupString() if available.

Change 2898 on 2003/09/12 by nick@llama

	If we "know" selection is UTF-8 (maybe partial), don't do
	the perl check which complains about partials. Likewise
	don't create an SV of partial fragments but just append
	as octets.

Change 2896 on 2003/09/11 by nick@llama

	On non-windows set TCL_UTF_MAX to perl's (excessive?) 13
	so we get Tcl_UniChar big enough for UCS-4

Change 2895 on 2003/09/11 by nick@llama

	Another numBytes adjust giving partial character issue.

Change 2894 on 2003/09/11 by nick@llama

	Avoid DStrings for INCR selections and allocate
	non-trivial buffer even for short requests.

Change 2893 on 2003/09/11 by nick@llama

	Don't ask to measure partial characters (Xft doesn't like it).
	Make Xft abort() rather than inifite loop if we get partial char.

Change 2892 on 2003/09/11 by nick@llama

	More attempts at PNG build

Change 2891 on 2003/09/08 by nick@llama

	tkUnixFont return pixel size as actual.
	optionAdd to force font selection in test.

Change 2890 on 2003/09/08 by nick@llama

	Try and use a valid event time for Selection calls
	to match ICCCM rules.

Change 2889 on 2003/09/08 by nick@llama

	Misc cleanup - new Makefile.PL for PNG, remove debug from Xft,
	autogenerated files.

Change 2888 on 2003/09/07 by nick@llama

	Xft honours in-place font mods i.e. $font->configure
	valgrind Xft some

Change 2886 on 2003/09/07 by nick@llama

	Make Xft own up to the actual font family fontconfig
	has given it to use.
	Add fontSubfonts method (from Tcl/Tk's "test" command), and
	some tests & diagnostics in t/font.t
	Tune entry.t and listbox.t by using "Adobe Helevtica" family
	for Xft.

Change 2885 on 2003/09/07 by nick@llama

	Still getting odd results from Xft's XLFD parse, so don't use
	it at all (use Tk's).

Change 2884 on 2003/09/07 by nick@llama

	More PNG build fallout

Change 2883 on 2003/09/06 by nick@dromedary

	Manifest updates

Change 2882 on 2003/09/06 by nick@camel

	Win32 PNG support works with mingw at least

Change 2881 on 2003/09/06 by nick@camel

	New libpng and zlib import

Change 2880 on 2003/09/06 by nick@camel

	Win32 build issues.

Change 2879 on 2003/09/06 by nick@dromedary

	JPEG build hackery

Change 2878 on 2003/09/06 by nick@llama

	Make Tix DItems work right with Xft. Unix was using
	XClipRectangles(), which XftDraw has no easy way to access.
	Switch to scheme used on Win32 - draw into right-sized pixmap -
	by promoting Win32 scheme to a generic one. Also
	pass "display info" into sub-region start so we can get
	depth of required pixmap.

Change 2877 on 2003/09/04 by nick@llama

	Mark places where Tix DItems width and char/bytes seem
	to be an issue.

Change 2876 on 2003/09/04 by nick@llama

	Allow Tcl_UniCharIsSpace

Change 2875 on 2003/09/04 by nick@llama

	When measuring and asked for words don't return 0
	if there are no spaces.

Change 2874 on 2003/09/04 by nick@llama

	Steve's manual corrections auto-converted man->pod for
	new core widgets.

Change 2873 on 2003/09/04 by nick@llama

	Hue range correction.

Change 2872 on 2003/09/02 by nick@llama

	Various Xft fixes & copyright
	Loose last XLFD default font names
	Try tuning entry.t

Change 2871 on 2003/08/31 by nick@llama

	Make -lXft optional (default off) and discuss briefly in README

Change 2870 on 2003/08/31 by nick@llama

	Use Tk's XLFD parse when Xft's fails.

Change 2869 on 2003/08/31 by nick@llama

	Update generated files

Change 2868 on 2003/08/31 by nick@llama

	Basic Xft support using code Keith Packard <keithp@keithp.com>

Change 2863 on 2003/08/31 by nick@llama

	De-specialize Tile stuff - we were not using the canvas Item
	argument and that muddies waters for apply to other widgets
	someday.

Change 2862 on 2003/08/31 by nick@llama

	Finish re-implementing Tk_Tile stuff

Change 2861 on 2003/08/31 by nick@llama

	Tweaks to try and re-enable -tile on Canvas (does not work yet)
	 - add various code fragments that seem to be missing in diff
	   with Tk800/pTk/tlCanvas.c
	 - re-enable bboxProc of Tk_Item
	 - avoid core-dump if Tk_Tile is NULL

Change 2860 on 2003/08/30 by nick@llama

	More messing with exit and associated cleanup calls.
	We were not calling WhenDeleted callbacks on commands,
	so send was not deleting its entry from list of interps.
	When we started calling them other snags showed up (exit again).

Change 2859 on 2003/08/30 by nick@llama

	Call Tcl_Finialize() as an END block if Tcl_Exit() is not called.
	Otherwise application is not deleted from "interps" as used
	by send.

Change 2858 on 2003/08/30 by nick@llama

	Use fullpath in try_run

Change 2857 on 2003/08/29 by nick@llama

	Use WriteEmptyMakefile if we cannot find -lpng etc.

Change 2856 on 2003/08/28 by nick@llama

	Steve's patch for demos

Change 2855 on 2003/08/27 by nick@llama

	perl-only fix to the "image does not exist" messages
	from balloons. They were being double delete-d due to
	various mis-understandings of how widget destroy has always worked.
	(Maybe revist Balloon.pm as it is overly complex and causes a lot of
	 overhead.)

Change 2854 on 2003/08/26 by nick@llama

	Loose one of larger .jpg files

Change 2853 on 2003/08/26 by nick@llama

	Another try at jpeg lib detection

Change 2852 on 2003/08/26 by nick@llama

	Fix photo rotate and similar uses of string-write to Photo.

Change 2851 on 2003/08/26 by nick@llama

	Check for _TCL_EXIT() in Tk::Event's $@ code - to supresss
	some errors on calling exit().

Change 2850 on 2003/08/26 by nick@llama

	Manually applied Steve's patches for demos:
	  - wrong name for view_widget
	  - various cscroll.pl fixes:
	     - avoid sprintf()
	     - ->find returns array ref in scalar context
	     - use scanMark style.

Change 2849 on 2003/08/26 by nick@llama

	Slaven't FBox/FileSelect patch

Change 2848 on 2003/08/24 by nick@llama

	Slaven's gcc-3-isms patch

Change 2847 on 2003/08/24 by nick@llama

	Manifest, Change log, generated files etc.

Change 2846 on 2003/08/24 by nick@llama

	Bundle PNG

Change 2844 on 2003/08/24 by nick@llama

	Bundle tkJPEG

Change 2842 on 2003/08/24 by nick@llama

	Use system's -ljpeg if we can find it.

Change 2841 on 2003/08/24 by nick@llama

	All perl/Tk Photo formats are in new style - no tricks
	saying formats which start with upper-case take strings
	not Tcl_Obj please!

Change 2840 on 2003/08/24 by nick@llama

	Fix Steve bug #6 (fileevent untie) - extra REFCNT someone
	else (Slaven?) sugested to keep structures live during call
	were causing problems if we untied in the callback.

Change 2839 on 2003/08/24 by nick@llama

	Steve's warning avoidance in Tk::Table

Change 2838 on 2003/08/23 by nick@llama

	Use new variable option types for buttons.

Change 2837 on 2003/08/23 by nick@llama

	Return image names as objects as well.

Change 2836 on 2003/08/23 by nick@llama

	Image create was not returing an object.
	(Steve's bug #4)

Change 2835 on 2003/08/23 by nick@llama

	Support legacy scheme of defaulting -variable options
	for menu check buttons etc. (Steve's bug #3)

Change 2834 on 2003/08/22 by nick@llama

	Re-re-architect Tk::exit

Change 2833 on 2003/08/22 by nick@llama

	End-off-buffer issues with tkUnixSelect.c

Change 2832 on 2003/08/20 by nick@llama

	perl5.8.0 tolerance

Change 2831 on 2003/08/17 by nick@llama

	@$ may be undef not "" so stringify before testing.

Change 2830 on 2003/08/17 by nick@llama

	Tidy up Drag/Drop

Change 2829 on 2003/08/16 by nick@llama

	License terms have been tweaked for US Government

Change 2828 on 2003/08/16 by nick@llama

	Re-integrate tcl/tk docs with .3 files in right place

Change 2827 on 2003/08/16 by nick@llama

	Move *.3 man pages back to man3 dir

Change 2826 on 2003/08/15 by nick@llama

	Fixup Xdnd drop site code. (Drag side still needs work).
	Main snag was misguided guessing of "text/..." selection types,
	and tk8's addition of wrapper window.

Change 2824 on 2003/08/15 by nick@llama

	Add a selection hook to tkGlue.c

Change 2823 on 2003/08/15 by nick@llama

	Correct handling of loose selction callback. (Was breaking
	DragDrop).

Change 2821 on 2003/08/14 by nick@llama

	More encoded selections fixup

Change 2819 on 2003/08/14 by nick@camel

	Windows tweaks

Change 2818 on 2003/08/14 by nick@llama

	Seems we need anoth dTHX with latest perl

Change 2817 on 2003/08/14 by nick@llama

	Remove old demos mainly for Win32 command line
	length issues for Win32 make

Change 2815 on 2003/08/11 by nick@llama

	More UnixFont troubles - this time not crossing out
	unicode fonts due to iso10646-1/ucs2-be alias muddle.
	Might be worth explicitly crossing out _the_ failing
	font instead/as well.

Change 2814 on 2003/08/10 by nick@llama

	Re-work UTF8_STRING/STRING request to work with legacy
	apps better.

Change 2813 on 2003/08/10 by nick@llama

	Mark high-bit case ignore as last on line test we stumbled on
	as todo in older perls.

Change 2812 on 2003/08/10 by nick@llama

	UTF8_STRING selection support for non-INCR selections
	works. tkUnixSelect.c still a mess and includes some debug.

Change 2811 on 2003/08/09 by nick@llama

	Re-instate selection('exists',...)

Change 2810 on 2003/08/09 by nick@llama

	More RegExp testing (found a bug in perl!)

Change 2809 on 2003/08/08 by nick@llama

	Various tweaks to Tcl_RegExp emulation.
	Still not quite right for regexp itself being UTF-8
	One core tk bug or mis-merge.
	Lots of dTHX additions to tkGlue.c

Change 2808 on 2003/08/07 by nick@llama

	Mainly upgrades to regular expression support.
	1. Now marks expressions from Tk as being UTF-8
	2. Marks strings from Tk as being UTF-8
	3. Pattern passed to Text match can be qr//
	Above untested as seems TextUndo's Find menu
	has gone walk-about and "gedi" has other problems.

Change 2807 on 2003/08/07 by nick@llama

	Steve's patch #3

Change 2806 on 2003/08/07 by nick@llama

	Unix font ranking control from perl (experimental)

Change 2805 on 2003/08/06 by nick@llama

	"Hook" key Unix font selection back to tkGlue.c
	in preparation for a perl-controllable hook.
	Various other debug removal and re-aligning with Tcl/Tk
	changes to tkUnixFont.c

Change 2804 on 2003/08/05 by nick@llama

	Found and fixed fileevent SV leak.
	Left extra comments etc. in the code.
	Decided that loops of > 100 which leak less than
	10 SVs don't really leak.

Change 2803 on 2003/08/04 by nick@llama

	Steve's demo patch and associated tweaks to
	bindings etc.

Change 2802 on 2003/08/04 by nick@llama

	Fix REFCNT problem with torn-off menus

Change 2801 on 2003/08/04 by nick@llama

	Doc change for Arg -> Tcl_Obj * that got lost

Change 2800 on 2003/08/03 by nick@dromedary

	More attempts at debugging tearoffs

Change 2799 on 2003/08/03 by nick@dromedary

	Fix one bug in cloned menu stuff. Still something lurking:
	<Enter>-ing a torn off menu gets a non-callback after "a few"
	tear-off/destroy tries. (e.g. Help->About on widget demo.)

Change 2797 on 2003/07/31 by nick@camel

	Set hInstance to give access to bitmaps and cursors.

Change 2796 on 2003/07/30 by nick@llama

	Add windows cursor

Change 2795 on 2003/07/30 by nick@llama

	Move exit above use Tk.

Change 2793 on 2003/07/29 by nick@camel

	exit on skip now needs to be CORE::exit()

Change 2792 on 2003/07/29 by nick@dromedary

	Switch listbox.t to Test::More and relax it to pass on older KDE
	Some of tests may now be near pointless matching /^\d+x\d+$/
	for geometries!

Change 2791 on 2003/07/28 by nick@camel

	A few windows tweaks.

Change 2790 on 2003/07/27 by nick@dromedary

	Align Unix with Win32 on how to scan window ids

Change 2789 on 2003/07/27 by nick@camel

	"correct" a couple more Tcl_Obj things for windows
	(may have to revert this if UNIX/X does not like it).

Change 2788 on 2003/07/27 by nick@dromedary

	Win32 isms leaking

Change 2787 on 2003/07/27 by nick@camel

	Win32 hackery.
	Main hack is to call TkWinXInit() at Tk.xs boot time
	as it now calls Tcl_Xxxx so needs to have had Tk::Event
	vtable installed.
	
	Runs good slab of tests now.
	Known Snags:
	  - Tcl_Obj vs string issue in tkBind.c somewhere
	  - ColorEditor fails as wMIconImage isn't there

Change 2786 on 2003/07/27 by nick@dromedary

	Loose Img prefix

Change 2785 on 2003/07/27 by nick@llama

	A hack to keep author of t/cursor.t happy by returning
	a list.

Change 2784 on 2003/07/27 by nick@llama

	Change all occurances of 'Arg' to 'Tcl_Obj *'
	Arg is known to collide with a VisualC++ header and
	is unnessary now the Tcl thing exists.
	(We still #define it to perl's SV.)

Change 2783 on 2003/07/27 by nick@llama

	Tweaks before new snapshot

Change 2782 on 2003/07/27 by nick@llama

	Patch from Steve Lidie <sol0@Lehigh.EDU>
	Date: Sat, 26 Jul 2003 22:43:59 -0400

Change 2781 on 2003/07/27 by nick@llama

	Attempt to fix tearoff menus.
	 - better than it was ?
	 - still behaving oddly (loosing callbacks)
	 - can coredump (having apparently corrupted perl SV arena) if
	   same menu is torn of twice.
	Actual fix is just in Menu.pm other files just touched
	to make their diagnostics/checking more robust.

Change 2780 on 2003/07/27 by nick@llama

	Re-work TK_OPTION_OBJ and TK_OPTION_CALLBACK to avoid
	leaks.

Change 2779 on 2003/07/27 by nick@llama

	Invent TK_OPTION_CALLBACK for new style configure.
	This allows callbacks to be checked at configure time,
	and minimizes changes to .pm files which assumed callbacks
	were already objects.

Change 2778 on 2003/07/27 by nick@llama

	Add missing '-' e.g. -text => ... not text => ...

Change 2777 on 2003/07/26 by nick@llama

	Tk::exit() as perl code which cooperates with MainLoop.
	This avoids calling perl's my_exit() which longjmp()s
	out of event dispatch leaving stack addresses in data structures.

Change 2776 on 2003/07/26 by nick@llama

	Revert the "address in stack avoidance" change.

Change 2775 on 2003/07/26 by nick@llama

	Mess with diagnostics for callbacks.
	In particular add destcription of event to error info.

Change 2774 on 2003/07/26 by nick@llama

	With new config code callbacks are not distingushed from
	objects. This is an experiment to see if it helps various
	callback related problems. It makes LangCopyArg() create
	a callback for the sub-ref case.

Change 2773 on 2003/07/26 by nick@llama

	WORKROUND: - tkBind.c and tkEvent.c were storing addresses
	of stack frame in structures. When die/exit longjmp()ed out
	of them weird things happened.
	Workround is to malloc() the data - it is a workround as
	it leaks. Need a new hook which uses perl'scope stack
	to de-link and free the structures.

Change 2772 on 2003/07/26 by nick@llama

	Ease of use fix - strip junk from end of file name.

Change 2771 on 2003/07/26 by nick@llama

	Enable leak.t without perl's malloc

Change 2770 on 2003/07/26 by nick@llama

	Switch to new style $VERSION code when add_version run

Change 2769 on 2003/07/26 by nick@llama

	Revert changes to listbox and entry with respect to errorResult
	refcounting. They were following idiomatic style. Instead work round
	the problem in tkGlue.c's version of Tcl_SetObjResult() pending
	re-think of whole "result" scheme.

Change 2768 on 2003/07/26 by nick@llama

	Re-work -class handling for widgets configured
	"new style".

Change 2767 on 2003/07/25 by nick@llama

	Versions

Change 2766 on 2003/07/25 by nick@llama

	Skeleton code for new widgets:
	  Labelframe - a frame with a label?
	  Panedwindow - shashes etc. - needs bindings converting from Tcl.

Change 2765 on 2003/07/25 by nick@llama

	The copyright date code is flawed, but was missing things
	that should have been updated.

Change 2764 on 2003/07/25 by nick@llama

	Callback SvROK fix akin to one in Event/pTkCallback.c

Change 2763 on 2003/07/25 by nick@llama

	Part1 of tearoff fix.

Change 2762 on 2003/07/25 by nick@llama

	Re-add transparent and Tk bitmaps.
	Fix core dump in canvas item search (e.g. floorplan demo)

Change 2761 on 2003/07/25 by nick@llama

	Make all -variable and -command type options TK_OPTION_OBJ
	if using new config style. (Akin to TK_CONFIG_CALLBACK and
	Tk_CONFIG_LANGARG under old scheme.)

Change 2760 on 2003/07/25 by nick@llama

	Unbundle ye olde Encode module

Change 2759 on 2003/07/24 by nick@llama

	Avoid depending on Tk::NumEntry which isn't here.
	Instead use new Spinbox (which is similar).
	Fix BrowseEntry to not mess with LabEntry's bindtags
	(which kills spinbox).

Change 2758 on 2003/07/24 by nick@llama

	Minor "what is nothing" patch to Frame's -use option
	where perl and Tcl differ.
	Update versions in README.
	All tests pass.

Change 2757 on 2003/07/24 by nick@llama

	Raw integrate of tcltk8.4.4

Change 2754 on 2003/07/24 by nick@llama

	Avoid nested comments when generating .t files

Change 2753 on 2003/07/23 by nick@bactrian

	Junk removal

Change 2752 on 2003/07/23 by nick@llama

	Update Change.log

Change 2751 on 2003/07/23 by nick@llama

	Turn off some debug

Change 2750 on 2003/07/23 by nick@llama

	MANIFEST update

Change 2748 on 2003/07/23 by nick@llama

	Missed trailing / off.

Change 2747 on 2003/07/23 by nick@llama

	Experiment with $Word$ things.

Change 2746 on 2003/07/23 by nick@llama

	See what $Revision$ does...

Change 2745 on 2003/07/23 by nick@llama

	Add Spinbox support

Change 2742 on 2003/07/23 by nick@llama

	New stub scheme defered.

Change 2741 on 2003/07/23 by nick@llama

	Make stbDashCustom a #included file with statics

Change 2740 on 2003/07/23 by nick@llama

	Lost a return in the merge.

Change 2739 on 2003/07/22 by nick@llama

	Listbox and entry fixes.

Change 2738 on 2003/07/21 by nick@llama

	Avoid segfaults due to lifetime issues with char * values
	of "wm command ..." args. Revert to saving a Tcl_Obj.

Change 2736 on 2003/07/20 by nick@llama

	Make Entry and its tests match:
	  list returns
	  REFCNT
	  error messages have changed (better english)

Change 2735 on 2003/07/20 by nick@llama

	Integrate tuned/fixed tests

Change 2733 on 2003/07/20 by nick@llama

	Update change log

Change 2732 on 2003/07/20 by nick@llama

	$VERSIONs

Change 2730 on 2003/07/20 by nick@llama

	Copyright dates

Change 2729 on 2003/07/20 by nick@llama

	Pull some stuff from Tk800 branch
	Update MANIFEST.

Change 2728 on 2003/07/20 by nick@llama

	Runs more or less a well as it did.
	Possible snag with photo.
	Tune wm-time.t for KDE window manager in SuSE 8.2

Change 2727 on 2003/07/20 by nick@llama

	Integrated code compiles/links

Change 2726 on 2003/07/20 by nick@llama

	Raw integrate of tcl/tk8.4.3
	  Main dogynesses seem to be in Unix Selection code (resolved?)
	  and Canvas which has gone Tcl_Obj * style but may have lost
	  groups as a consequence.

Change 2723 on 2003/07/20 by nick@llama

	Integrate and resolve //depot/TkuSteve/... which
	has had Steve's patches applied.

Change 2715 on 2003/07/19 by nick@llama

	Integrate from Tk8 branch

Change 2710 on 2003/07/19 by nick@llama

	gcc3 signed/unsigned pickyness

Change 2701 on 2003/04/14 by nick@bactrian

	Bad UTF-8 debug.

Change 2518 on 2002/10/31 by nick@bactrian

	Add canvas PostScript diagnostic code.

Change 2516 on 2002/10/15 by nick@bactrian

	Steve's patch for Darwin

Change 2514 on 2002/10/13 by nick@dromedary

	Get rid of zero sized files

Change 2513 on 2002/10/13 by nick@dromedary

	Auto and manual version updates

Change 2512 on 2002/10/13 by nick@bactrian

	Mis-translated global SelectionClear to listbox local

Change 2510 on 2002/10/08 by nick@bactrian

	Fix meta-keys eating chars in overstrike mode
	(derived from suggested patch by Sreeji K Das <bksys@vsnl.com>)

Change 2509 on 2002/10/06 by nick@dromedary

	Strings from Tk_EventInfo maybe UTF-8

Change 2508 on 2002/10/06 by nick@bactrian

	Clear directory listbox selection on a reread.

Change 2507 on 2002/10/06 by nick@dromedary

	Make $text->get return '' rather than undef for indices equal.
	Avoids a lot of hassle in existing .pm files.

Change 2506 on 2002/10/06 by nick@dromedary

	Fix REFCNT muddle and UTF-8ness of Tcl_DStringResult

Change 2505 on 2002/10/05 by nick@vmnt

	"Tune" WM timing test for Win32

Change 2502 on 2002/10/05 by nick@dromedary

	Back-out some of UNIX Unicode font changes - they tickle a
	feature of sub-font logic (pointer to array which is re-allocated).

Change 2501 on 2002/10/05 by nick@bactrian

	More debugging of UNIX font issues

Change 2500 on 2002/10/05 by nick@bactrian

	Optimize 0-length case of UTF-8 -> external.

Change 2499 on 2002/10/04 by nick@dromedary

	Reinstate wmWrapper, subsume wmSaveunder in overrideredirect
	Update MANIFEST

Change 2498 on 2002/10/04 by nick@vmnt

	Work round lack of "release"

Change 2497 on 2002/10/04 by nick@vmnt

	Menus working on Win32

Change 2496 on 2002/10/04 by nick@dromedary

	Tested tmenu on UNIX

Change 2495 on 2002/10/04 by nick@vmnt

	Trivial menu test

Change 2494 on 2002/10/04 by nick@vmnt

	Initialize vtables by right names!

Change 2493 on 2002/10/04 by nick@dromedary

	Add timy Entry test

Change 2492 on 2002/10/04 by nick@vmnt

	More forgotten changes ferom Win32

Change 2491 on 2002/10/04 by nick@vmnt

	All builds on Win32

Change 2490 on 2002/10/04 by nick@vmnt

	Bitmap may as well be built in

Change 2489 on 2002/10/04 by nick@dromedary

	Generate vtable declare/import #defines

Change 2488 on 2002/10/04 by nick@vmnt

	Files from p4 diff -se ./...

Change 2487 on 2002/10/04 by nick@dromedary

	More Unix vs Win32 messing about

Change 2486 on 2002/10/03 by nick@dromedary

	Ev('A') can now use the stack - so need PUTBACK 

Change 2485 on 2002/10/03 by nick@dromedary

	Quick-fix for wmSaveunder and wmWrapper

Change 2484 on 2002/10/03 by nick@dromedary

	Toplevel-ness check for wmRelease is inverse of normal

Change 2483 on 2002/10/03 by nick@dromedary

	More conservative form of Ev('A')

Change 2482 on 2002/10/03 by nick@vmnt

	Encoding hackery to get Win32/Unicode displaying for 'tiny'

Change 2481 on 2002/10/03 by nick@vmnt

	Win32 loads/runs tiny without segfaults

Change 2480 on 2002/10/03 by nick@vmnt

	Win32 loads tiny (encode not right yet)

Change 2479 on 2002/10/02 by nick@dromedary

	Fixup Unix build

Change 2478 on 2002/10/02 by nick@vmnt

	All compiles on Win32 (does not link cleanly yet)

Change 2477 on 2002/10/02 by nick@vmnt

	pTk compiles and builds lib VC++ ver 6 WinNT

Change 2476 on 2002/10/01 by nick@dromedary

	Re-work mkVFunc to tolerate Mac/Win signature differences?

Change 2475 on 2002/09/30 by nick@vmnt

	Avoid having to find encode.h

Change 2473 on 2002/09/22 by nick@vmnt

	More Win32 vtable experiments

Change 2472 on 2002/09/22 by nick@vmnt

	Win32 stuff 

Change 2471 on 2002/09/22 by nick@vmnt

	Avoid problems with #include <windows.h>

Change 2470 on 2002/09/22 by nick@bactrian

	Exclude nmake stuff

Change 2469 on 2002/09/22 by nick@bactrian

	Hackery for new way Tk fakes Xlib on Win32 etc.

Change 2468 on 2002/09/16 by nick@bactrian

	MANIFEST fixups (laptop)

Change 2467 on 2002/09/16 by nick@dromedary

	MANIFEST fixups

Change 2466 on 2002/09/15 by nick@dromedary

	Auto version update

Change 2465 on 2002/09/15 by nick@dromedary

	Avoid collision between LabFrame's -label and implict -label 
	on Frame

Change 2464 on 2002/09/15 by nick@dromedary

	Remove som debug for now.

Change 2463 on 2002/09/15 by nick@dromedary

	Tidy up after tk8.4.0 merge (an easy one for a change)

Change 2462 on 2002/09/15 by nick@dromedary

	Raw integrate of tck/tk 8.4.0

Change 2455 on 2002/09/08 by nick@dromedary

	Update generated .t and .m files

Change 2454 on 2002/09/08 by nick@dromedary

	reinstate wm capture, release, iconimage

Change 2453 on 2002/09/08 by nick@dromedary

	All .so-s load again

Change 2452 on 2002/09/07 by nick@dromedary

	Raw integrate of Tcl/Tk 8.4b2

Change 2449 on 2002/09/07 by nick@dromedary

	All .so's load

Change 2448 on 2002/09/07 by nick@dromedary

	More tk8.4 fixups

Change 2443 on 2002/08/09 by nick@dromedary

	Fix bug in nested #if logic
	Handle #elif
	Tolerate '#if defined foo' without ()

Change 2442 on 2002/08/09 by nick@bactrian

	Laptop fixups

Change 2441 on 2002/08/09 by nick@dromedary

	Update generated files

Change 2439 on 2002/08/05 by nick@dromedary

	More merge fixups

Change 2438 on 2002/08/04 by nick@dromedary

	Integrate tcl/tk docs

Change 2430 on 2002/07/23 by nick@dromedary

	More integrate fixups

Change 2429 on 2002/07/21 by nick@dromedary

	Hand fixed of mis-integrates (part1)

Change 2428 on 2002/07/21 by nick@dromedary

	Raw integrate of tcl/tk 8.4b1

Change 2427 on 2002/07/20 by nick@dromedary

	Integrate tix-8.1.4b1

Change 2425 on 2002/07/20 by nick@dromedary

	Import /tmp/tix-8.1.3

Change 2423 on 2002/07/20 by nick@dromedary

	Import /tmp/tcl8.4b1

Change 2422 on 2002/07/20 by nick@dromedary

	Integrate .pm from Tk800

Change 2416 on 2002/07/14 by nick@dromedary

	Integarate Tk800's ptked

Change 2413 on 2002/07/14 by nick@dromedary

	More -text from text => stuff

Change 2412 on 2002/07/14 by nick@dromedary

	Integrate some of Tk800 stuff

Change 2408 on 2002/07/14 by nick@dromedary

	Integrate mousewheel stuff

Change 2406 on 2002/07/14 by nick@dromedary

	The "fix" for slow popups adapted from Tk800.

Change 2402 on 2002/07/13 by nick@bactrian

	Regen things

Change 2401 on 2002/07/13 by nick@bactrian

	Debugging and core-dump avoidance

Change 2397 on 2002/04/19 by nick@dromedary

	Co-operate with Encode-1.50+'s (i.e. use ENCODE_FB_QUIET when we want that).

Change 2396 on 2002/04/19 by nick@bactrian

	Don't polute Encode::Alias's idea of encodings we need
	as "raw" - do our own alias instead.

Change 2395 on 2002/04/19 by nick@bactrian

	Some tweaks to return values etc.

Change 2392 on 2002/04/15 by nick@bactrian

	Turn of DO_CHECK_TCL_ALLOC

Change 2391 on 2002/04/15 by nick@bactrian

	Slaven's fixes.

Change 2390 on 2002/04/14 by nick@dromedary

	Add re-configure (with defaults) to create.t,
	fix couple of snags that showed.
	Fix Scale to return list for x,y

Change 2389 on 2002/04/13 by nick@dromedary

	More memory leak debugging.

Change 2387 on 2002/04/12 by nick@bactrian

	VERSION tweaks etc.

Change 2386 on 2002/04/12 by nick@bactrian

	Pre-alpha release prep.

Change 2385 on 2002/04/11 by nick@bactrian

	Keep tix's argument order but use our GetStyleTable() scheme.

Change 2384 on 2002/04/11 by nick@bactrian

	Raw merge of tix-8.1.3

Change 2382 on 2002/04/10 by nick@nick-w2k

	Win32-isms part 1 of who can guess...

Change 2381 on 2002/04/09 by nick@bactrian

	Aliases for Dan's current Encode module

Change 2380 on 2002/04/09 by nick@bactrian

	tkGrid gross issues

Change 2379 on 2002/04/09 by nick@dromedary

	Experimental tweak to UnixFont and test sanity

Change 2378 on 2002/04/05 by nick@dromedary

	Fix after (needed more type emulation)

Change 2376 on 2002/04/05 by nick@dromedary

	Some sanity in font handling

Change 2375 on 2002/04/05 by nick@dromedary

	Use flags forms of to/from UTF-8 (5.7+) and enable tolerance.

Change 2374 on 2002/04/04 by nick@dromedary

	Start some serious Unicode testing

Change 2373 on 2002/04/04 by nick@dromedary

	Avoid skipping -format which Tcl/Tk has "parsed" long hand...

Change 2372 on 2002/04/04 by nick@dromedary

	basic_demo (tweaked) runs without core dumps.
	All but t/fbox.t pass.
	Needed to fix UnixWm to cope with images of zero size (not allocate Pixmap
	but still free Image).
	Tk::Font is interfering with Tcl_Obj fonts. For now just caches Tk_font
	and avoids freeing it as it does not have a legitimate ref to it.

Change 2371 on 2002/04/04 by nick@dromedary

	Fixup list returns

Change 2370 on 2002/04/04 by nick@dromedary

	Avoid warning for malloc leak - breaks tests
	#undef JOIN (threads) collides with tcl.h

Change 2369 on 2002/04/04 by nick@dromedary

	Integrate fileevent recursion fix from Tk800
	Integrate .pm changes from Tk800

Change 2368 on 2002/04/04 by nick@dromedary

	Fake more Tcl_Obj type stuff

Change 2366 on 2002/04/04 by nick@dromedary

	t/create.t runs without core-dumps.
	Still an issue with OptionMenu -options.

Change 2365 on 2002/04/01 by nick@dromedary

	'tiny' loads and runs

Change 2364 on 2002/04/01 by nick@dromedary

	Tk.so loads (still core dumps but hey its a start...)

Change 2363 on 2002/04/01 by nick@dromedary

	pTk sub-dir compiles

Change 2362 on 2002/03/31 by nick@bactrian

	Missed files

Change 2361 on 2002/03/31 by nick@bactrian

	Porting part1 of N (move process to faster machine)

Change 2358 on 2002/03/17 by nick@bactrian

	Integrate tcl/tk 8.4a3

Change 2353 on 2002/03/16 by nick@bactrian

	Integrate tcl8.3.4 and tk8.3.4

Change 2352 on 2002/03/16 by nick@bactrian

	Remove iconimage to aid merge

Change 2351 on 2002/03/16 by nick@bactrian

	Wtitepsace normalize

Change 2225 on 2001/05/22 by nick@dromedary

	Integrate perl code from Tk800.023+

Change 2172 on 2001/04/07 by nick@dromedary

	Minor iso-10646-1 speedup

Change 2171 on 2001/04/07 by nick@dromedary

	Integrate PerlIO fix

Change 2166 on 2001/04/04 by nick@bactrian

	Tweak for warning-less build (-Werror) against
	current XFree86's Xlib.h

Change 2165 on 2001/04/04 by nick@bactrian

	Integrate changes made to Tk8 branch

Change 2162 on 2001/03/29 by nick@dromedary

	Perl5.7.* tolerance.

Change 2160 on 2001/03/28 by nick@dromedary

	Integrate MULTIPLICTY tweak from Tk800.

Change 2112 on 2001/01/27 by nick@dromedary

	Avoid utf8-isms on old perls.

Change 2106 on 2001/01/01 by nick@dromedary

	Various utf8 fixes.

Change 2103 on 2000/12/12 by nick@pluto

	Obey latest utf8_to_uv prototype

Change 2102 on 2000/12/12 by nick@pluto

	Integrate perlio co-existance issue

Change 2097 on 2000/11/02 by nick@pluto

	Honour hidden-ness in PostScript.

Change 2095 on 2000/11/02 by nick@pluto

	Do gsave/grestore in DrawText PostScript - else its translate
	messes other drawing ops (at least when called via a group).

Change 2093 on 2000/10/30 by nick@pluto

	(Failed) attempt to localize failing error propagation.

Change 2091 on 2000/10/26 by nick@pluto

	Avoid using ST(0) as the scratch variable in Tk::Callback::Call
	XS code - issue if stack moves pushing the args.

Change 2089 on 2000/10/25 by nick@pluto

	Text xview/yview were not returning lists, hidden by implcit split.

Change 2088 on 2000/10/25 by nick@pluto

	When returning Tcl result to perl only call Tcl_ListObjGetElements
	if value is already an array ref. Also if value is not SvOK do
	not return any elements (ListObjGetElements did that for us
	but now we don't call it). Otherwise things like TextUndo::Save
	which do
	  print FILE $t->get(...);
	"split" the text line and we loose "\n" and other whitespace.

Change 2087 on 2000/10/19 by nick@pluto

	Call update commands when item redrawn via group.

Change 2086 on 2000/10/19 by nick@pluto

	Ignore group issues in Tk_ItemState() or lines etc. think
	they are hidden and set null bbox, and groups bbox is then
	garbage.

Change 2085 on 2000/10/19 by nick@pluto

	Allow local $Tk::LangDebug to control debug hook.

Change 2083 on 2000/10/19 by nick@pluto

	Avoid re-draw everything approach when a sub item of a group
	needs to be redrawn. Instead have new flag NEEDS_DISPLAY which
	we set on enclosing group(s).
	Also defer calling updateCmd till end of redraw to avoid issues
	with recusring.

Change 2082 on 2000/10/18 by nick@pluto

	Allow $canvas->move regardless of group-ness (like ->coord).

Change 2078 on 2000/10/11 by nick@pluto

	Sort out merge

Change 2077 on 2000/10/11 by nick@pluto

	Merge Tk800.*

Change 2076 on 2000/10/11 by nick@pluto

	Implement pick-through on canvas groups with -state => 'active'

Change 2074 on 2000/10/08 by nick@bactrian

	Reinstate iso8859-1 with bleadperl.

Change 2073 on 2000/10/08 by nick@bactrian

	Tweaks for AIX build

Change 2072 on 2000/10/07 by nick@bactrian

	Exclude loadables Text, Canvas, ... from Tk.so by avoiding mentioning them
	in tkWindow.c, while still passing extra info from "commands" table.

Change 2071 on 2000/10/07 by nick@bactrian

	Reinstate generic -class processing

Change 2070 on 2000/10/07 by nick@bactrian

	Add a VERSION

Change 2069 on 2000/10/07 by nick@bactrian

	More MANIFEST gotcha-s

Change 2068 on 2000/10/07 by nick@pluto

	Add Dummy Encode for perl5.005

Change 2067 on 2000/10/07 by nick@bactrian

	Update MANIFEST.SKIP.PL to use pTk.inc and pTk.exc files rather
	than blindly excluding everything which also exists under mTk.

Change 2066 on 2000/10/06 by nick@pluto

	Fix use of alwaysRedraw

Change 2064 on 2000/10/06 by nick@pluto

	Return bbox as a list

Change 2061 on 2000/10/05 by nick@pluto

	Fix Arc configure.

Change 2057 on 2000/10/04 by nick@pluto

	Play safe in DuplicateObj

Change 2054 on 2000/10/04 by nick@pluto

	Canvas does not really have bbox proc anymore.

Change 2053 on 2000/10/04 by nick@pluto

	Loose degenerate IntResults with one non-appened value.

Change 2050 on 2000/10/03 by nick@pluto

	workround - don't force list on AppendElement till 2nd one,
	likewise in IntResults. Fix append-ness in HList use of latter.
	Listbox should be fixed to return IntObj-s fror CURSELN

Change 2048 on 2000/10/03 by nick@bactrian

	Use perl_utf8_to_uv for now.

Change 2047 on 2000/10/03 by nick@pluto

	Remove debug from Optionmenu.
	Allow more time for FBox, and change ->after to avoid
	error after destroy in case time is not enough.

Change 2046 on 2000/10/03 by nick@pluto

	Make FBox and Optionmenu work together.

Change 2045 on 2000/10/03 by nick@pluto

	Builds under perl5.005_03 again with dummy "unicode/iso8859-1".

Change 2044 on 2000/10/02 by nick@pluto

	Add a Unicode demo

Change 2043 on 2000/10/02 by nick@pluto

	Perl-based encode seems to work at last.

Change 2042 on 2000/10/02 by nick@pluto

	Encoding files

Change 2041 on 2000/10/01 by nick@bactrian

	Avoid "Assuming require" style AUTOLOAD for class methods,
	This avoids problems with utf8 'IsUpper' stuff.

Change 2040 on 2000/10/01 by nick@bactrian

	Encoding using calls to perl objects.

Change 2039 on 2000/10/01 by nick@bactrian

	Our headers in case we ever use it

Change 2038 on 2000/10/01 by nick@bactrian

	Fail in the expected manner on out-of-range chars.
	Tweak UnixFont to only read in pages of 256 so that iso-8859-1 does
	not ask for 0x200..0x3FF by default.

Change 2037 on 2000/09/30 by nick@bactrian

	Dummy iso-8859-1 decode.

Change 2036 on 2000/09/30 by nick@bactrian

	In theory we now always expect hi-bits to/from Tcl_Xxxxx/Tk_Xxxxx to mean UTF8.
	Tests still pass...

Change 2035 on 2000/09/30 by nick@bactrian

	Loose dummy.dir stuff

Change 2034 on 2000/09/30 by nick@bactrian

	Tar file writing tweaks.

Change 2033 on 2000/09/30 by nick@bactrian

	Copyright dates

Change 2032 on 2000/09/30 by nick@bactrian

	Auto VERSION

Change 2031 on 2000/09/30 by nick@bactrian

	Avoid 'bool' which we have undef'ed

Change 2030 on 2000/09/30 by nick@bactrian

	Fix random memory corruption due to mis-rememebring how Compatibility
	wrapper worked.

Change 2029 on 2000/09/30 by nick@bactrian

	MANIFEST tidy up

Change 2028 on 2000/09/29 by nick@pluto

	Map Tcl's UTF8 stuff onto perl's - ugh.

Change 2027 on 2000/09/29 by nick@pluto

	perl5.005_03 build.
	Fix result restore issue with SelectionGet

Change 2026 on 2000/09/29 by nick@pluto

	Debug hooks for magic

Change 2025 on 2000/09/29 by nick@pluto

	Correct string compare for menu names.

Change 2024 on 2000/09/29 by nick@pluto

	Another backtrace

Change 2023 on 2000/09/29 by nick@pluto

	Re-implement our (pTk's) "tidy" menu bars.

Change 2022 on 2000/09/29 by nick@pluto

	Copy in just-like-Tcl tkUnixMenu.c till we can figure
	out why merged version does not work.
	When menu button destroys MainWindow tail end of bind
	cannot reset result in non-existant interp.

Change 2021 on 2000/09/29 by nick@pluto

	Move wrappers on common dialogs to perl code.

Change 2020 on 2000/09/28 by nick@pluto

	Flesh out stub Tk_Tile routines so t/dash.t passes.

Change 2019 on 2000/09/28 by nick@pluto

	Reinstate returning only element of list as scalar value.

Change 2018 on 2000/09/28 by nick@pluto

	Major overhaul of Result handling
	 - Result is always a real scalar
	 - SetObjResult does what it says.
	 - GetObjResult gets current or new scalar.
	 - ResetResult free's the scalar so GetObjResult creates new.
	 - perl->Tcl makes copies to avoid pads, temp, and other weird things
	 - Tcl->perl calls ListObjGetElements in array context, but
	   always makes mortal copies.
	 - Other "result-ish" things now implemented in Tcl-ish manner
	   using above.

Change 2017 on 2000/09/28 by nick@pluto

	configure ordering issues

Change 2016 on 2000/09/28 by nick@pluto

	Loose obsolete Lang*() decls

Change 2015 on 2000/09/28 by nick@pluto

	Use Tcl_Obj * scheme rather than LangSaveResult().

Change 2014 on 2000/09/28 by nick@pluto

	Re-instate Tk::Derived in Tk::Menu's ISA (though why we did
	that is unclear).

Change 2013 on 2000/09/28 by nick@pluto

	Use Tcl_GetInt rather than coined Lang_GetStrInt for original
	Tcl behaviour.

Change 2012 on 2000/09/28 by nick@pluto

	Make Tcl_ListObjReplace match REFCNT assumptions in tkListbox.c

Change 2011 on 2000/09/28 by nick@pluto

	-menu is a TK_OPTION_WINDOW

Change 2010 on 2000/09/28 by nick@pluto

	Propagate wantarray-ness

Change 2009 on 2000/09/28 by nick@pluto

	Make Tcl_SetObjResult of element match REFCNT assumptions
	used elsewhere.

Change 2008 on 2000/09/28 by nick@pluto

	Use "Normal" Tcl style way of accessing result.

Change 2007 on 2000/09/27 by nick@pluto

	Re-instate options for -tile and -disabled tile in Canvas.

Change 2006 on 2000/09/27 by nick@pluto

	Entry not saving commands as Tcl_Obj
	Text's embedded widget forcing stringify of return widget.

Change 2005 on 2000/09/27 by nick@pluto

	Two tweaks : re-instate ListBox returning list for bbox.
	Auto-de-ref in LangTraceVar as we don't have special Configure
	support (yet?) for variables.
	Mostly working "make test"

Change 2004 on 2000/09/27 by nick@pluto

	More save Tcl_Obj issues in Entry and Scale
	Do not require blessing of callbacks.

Change 2003 on 2000/09/27 by nick@pluto

	Possible overkill using perl's magic vtable scheme
	to call Tcl's freeInternalRep.
	 - Maybe 'get' should call update string ?
	 - Maybe 'set' should not de-type the TclObj?

Change 2002 on 2000/09/27 by nick@pluto

	Use SvSetMagicSV() rather than sv_setsv() everywhere - we have more
	magicals about now...

Change 2001 on 2000/09/27 by nick@pluto

	Tcl_Obj not 'Var' in .h file

Change 2000 on 2000/09/27 by nick@pluto

	Make a copy of args for _LANG objv has pad, temps and other
	stuff.

Change 1999 on 2000/09/27 by nick@pluto

	Save Tcl_Obj for varName

Change 1998 on 2000/09/26 by nick@bactrian

	Copy data in convert to external!

Change 1997 on 2000/09/26 by nick@bactrian

	Update Xlib vtable to include XRectInRegion
	Copy Tcl's Tcl_StringMatch (glob-ish) to encGlue.c (glob-ish match used by fonts)

Change 1996 on 2000/09/26 by nick@pluto

	Allow refs in new style 'Var' glue.

Change 1995 on 2000/09/26 by nick@pluto

	Menus create and clone approximately correctly.
	Menubar display still a little suspect, and have removed
	Tk::Derived from Menu's ISA till we resolve -background => undef
	issue.

Change 1994 on 2000/09/26 by nick@pluto

	Loose "is dummy" warnings
	Fix gross REFCNT issue in new tkConfig code.

Change 1993 on 2000/09/26 by nick@bactrian

	Tcl_GetCommandInfo returns boolean (and used on widgets).

Change 1992 on 2000/09/25 by nick@pluto

	Script to test widgets by name

Change 1991 on 2000/09/25 by nick@pluto

	Honour clientData for 'menu' and such as passed by
	code in tkWindow.c or where-ever

Change 1990 on 2000/09/25 by nick@pluto

	Save the Tcl_Obj's for width/height

Change 1989 on 2000/09/25 by nick@pluto

	Restore list-ness of Photo and ->formats sub-method.

Change 1988 on 2000/09/25 by nick@pluto

	Missed files

Change 1987 on 2000/09/25 by nick@pluto

	Image objects from strings and channel binary via encoding.

Change 1986 on 2000/09/25 by nick@pluto

	Diags in Tk::Widget::new.
	Make Tcl_GetCommandInfo() work for loaded commands.

Change 1985 on 2000/09/25 by nick@pluto

	Use 'AllocFromObj' not 'GetFromObj' for Font and Cursor.

Change 1984 on 2000/09/25 by nick@pluto

	Better dummy encode routines

Change 1983 on 2000/09/25 by nick@pluto

	Sort out vtables so all extns pass t/Require.t

Change 1982 on 2000/09/25 by nick@pluto

	Basic button works. But:
	 - no universal '-class' for now
	 - Button's error recovery scheme shows major snag with current
	   ResultAv() scheme used by Tcl_GetObjResult.

Change 1981 on 2000/09/25 by nick@pluto

	Extra arg for client data info

Change 1980 on 2000/09/24 by nick@bactrian

	Created and configuring a button.

Change 1979 on 2000/09/24 by nick@bactrian

	TK_CONFIG_OBJS and objClientData issues - MainWindow created.

Change 1977 on 2000/09/24 by nick@bactrian

	Allow Tcl_CreateObjCmd to build widgets by looking up tkwin.

Change 1976 on 2000/09/24 by nick@bactrian

	Our coinage 'LangString' replaced everywhere with Tcl's Tcl_GetString().

Change 1975 on 2000/09/24 by nick@bactrian

	Stubs for rest of threadish things that should live here.

Change 1974 on 2000/09/24 by nick@bactrian

	Stubs update - avoid Tcl_Encoding as non-opaque struct.

Change 1973 on 2000/09/23 by nick@bactrian

	Stubs or best guesses at imlementations of all unresolved refs.

Change 1971 on 2000/09/21 by nick@pluto

	Various vtable things.
	A few of new stubs needed.

Change 1970 on 2000/09/21 by nick@pluto

	Auto fossick with tkEvent.h and *.exc to represent
	what actually is in Event/*.o

Change 1969 on 2000/09/21 by nick@pluto

	Auto-generated form

Change 1968 on 2000/09/20 by nick@bactrian

	Event sanity

Change 1967 on 2000/09/20 by nick@pluto

	Add the prune utility to the depot

Change 1966 on 2000/09/20 by nick@pluto

	Prune vtables to things that are actually called

Change 1965 on 2000/09/20 by nick@pluto

	Map Tcl's stub table hacking on to our vtable hacking.

Change 1964 on 2000/09/20 by nick@pluto

	All sub-extensions build too.

Change 1963 on 2000/09/20 by nick@pluto

	Tk.so will build (no chance of loading) with vtables back on

Change 1962 on 2000/09/20 by nick@bactrian

	Start on xxGlue code - avoid conflict with Tcl's Var, CONST changes

Change 1961 on 2000/09/19 by nick@pluto

	Avoid only-used-once func

Change 1960 on 2000/09/19 by nick@pluto

	Setup for findcore etc. to probe for things we need to glue.

Change 1959 on 2000/09/19 by nick@pluto

	All _compiles_ (now will it link?)

Change 1957 on 2000/09/18 by nick@bactrian

	Sort out merge of pTk's wrap and help menu tweaks.

Change 1956 on 2000/09/18 by nick@bactrian

	Almost there - just some obscure Unix port issues left

Change 1955 on 2000/09/18 by nick@pluto

	More tidying

Change 1954 on 2000/09/18 by nick@pluto

	Convert Tk_Tile stuff to dummies till we can decipher
	what inherited BLT code was trying to do.

Change 1953 on 2000/09/18 by nick@pluto

	More fixups

Change 1952 on 2000/09/18 by nick@pluto

	Mangled {} nesting

Change 1951 on 2000/09/18 by nick@pluto

	Tcl_GetVar/Tcl_SetVar use Tcl_Obj forms.

Change 1950 on 2000/09/18 by nick@pluto

	Tcl_TraceVar muddle worked round

Change 1949 on 2000/09/18 by nick@pluto

	Various fixups

Change 1948 on 2000/09/18 by nick@pluto

	Fixup all the Photo formats to use new arg ordering.

Change 1947 on 2000/09/18 by nick@pluto

	Abstraction for internals access to Tcl_Obj

Change 1946 on 2000/09/17 by nick@bactrian

	Make tck.h's structs opaque again

Change 1945 on 2000/09/17 by nick@bactrian

	Round-the-houses merge of pTk's tkConfig.c into tkOldConfig.c

Change 1944 on 2000/09/17 by nick@bactrian

	Edits pre abortive merge idea

Change 1943 on 2000/09/17 by nick@bactrian

	Branch tcl.h and tkOldConfig.c

Change 1942 on 2000/09/16 by nick@bactrian

	Resolve / merge the files using new TK_OPTION stuff - mostly accept
	Tcl's version for now.

Change 1941 on 2000/09/16 by nick@bactrian

	Rough 1st resolve/merge of most of tk8.3.2

Change 1940 on 2000/09/12 by nick@bactrian

	Raw merge of tk8.3.2 docs

Change 1930 on 2000/09/12 by nick@bactrian

	White space our side

Change 1926 on 2000/09/12 by nick@bactrian

	Merge Tk800.023

Change 1862 on 2000/05/13 by nick@bactrian

	Integrate Tk800.022

Change 1759 on 2000/03/16 by nick@bactrian

	resolve -ay as basis for TclTkutf8 merges

Change 1758 on 2000/03/16 by nick@bactrian

	Auto VERSION update to 4.*

Change 1757 on 2000/03/16 by nick@bactrian

	Populate TKutf8 from Tk8

